%% UI UML
classDiagram
    %% Interfaces
    class ViewProvider~T = CreateComponent~ {
        <<interface>>
        create() Vec~T~
    }

    class ResponseComponentView {
        <<interface>>
        create_components() Vec~CreateComponent~
        create_reply() CreateReply
        create_message() CreateMessage
        attach(&mut Vec~CreateComponent~)
    }

    class StatefulView~D = ()~ {
        <<interface>>
        view_context() &ViewContext~D~
        view_context_mut() &mut ViewContext~D~
        send() Result~()~
        edit() Result~()~
    }

    class InteractableComponentView~T = Action, D = ()~ {
        <<interface>>
        handle(interaction) Option~T~
        listen_once() Option~(T, ComponentInteraction)~
    }

    class Action {
        <<interface>>
        ALL &[&str]
        custom_id() &str
        label() &str
    }

    %% Controller Pattern
    class Controller~O~ {
        <<interface>>
        run() Result~O~
    }

    class Coordinator {
        <<struct>>
        run(initial, next) Result~O~
    }

    %% Interface Relationships
    ViewProvider <-- ResponseComponentView : blanket impl
    ResponseComponentView <|-- StatefulView
    StatefulView <|-- InteractableComponentView

    %% Classes
    class AboutView
    class FeedSubscriptionsListView
    class FeedSubscriptionBatchView
    class PaginationView
    class SettingsFeedView
    class SettingsMainView
    class SettingsNavigationView
    class SettingsVoiceView
    class VoiceLeaderboardView

    %% Class Relationships
    StatefulView <|.. FeedSubscriptionBatchView
    StatefulView <|.. PaginationView
    StatefulView <|.. SettingsFeedView
    StatefulView <|.. SettingsMainView
    StatefulView <|.. SettingsVoiceView

    InteractableComponentView <|.. FeedSubscriptionBatchView : T=FeedSubscriptionBatchAction
    InteractableComponentView <|.. PaginationView : T=PaginationAction
    InteractableComponentView <|.. SettingsFeedView : T=SettingsFeedAction
    InteractableComponentView <|.. SettingsMainView : T=SettingsMainAction
    InteractableComponentView <|.. SettingsVoiceView : T=SettingsVoiceAction

    ResponseComponentView <|.. AboutView
    ResponseComponentView <|.. FeedSubscriptionsListView
    ResponseComponentView <|.. SettingsNavigationView
    ResponseComponentView <|.. VoiceLeaderboardView

    %% Controller Pattern Relationships
    Controller <|.. SettingsMainController
    Controller <|.. SettingsFeedController
    Controller <|.. SettingsVoiceController
    Coordinator ..> Controller : manages

    %% Unimplemented (but planned) stuff
    InteractableComponentView <|.. FeedNavigationView : T=FeedNavigationAction
    InteractableComponentView <|.. SettingsNavigationView : T=SettingsNavigationAction

    InteractableComponentView <|.. FeedSubscribeView : T=FeedSubscribeAction
    InteractableComponentView <|.. FeedUnsubscribeView : T=FeedUnsubscribeAction

    ResponseComponentView <|.. FeedSubscribeView
    ResponseComponentView <|.. FeedUnsubscribeView
    ResponseComponentView <|.. SettingsMainView
